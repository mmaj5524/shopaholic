<!DOCTYPE html>
<html>
    <head>
        <title>shop</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  
        
        
    </head>
    <body>
        
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>

</button>

      <a class="navbar-brand" href="#">MissShopaholic</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
    <ul class="nav navbar-nav">
      <li class="active"><a href="/">HOME</a></li>
      <li><a href="/shop">SHOP</a></li>
      <li><a href="/admin">ADMIN</a></li>
      <li><a href="/cart">CART</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="/register"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
      <li><a href="/login"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
      <li><a href="/logout"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
    </ul>
  </div>
  </div>
</nav>
          
        <div class="container">
            <header class="jumbotron">
                <div class="container">
                <h1 style="text-align:center;">MISS SHOPAHOLIC</h1>
                <p style="text-align:center;"> CHOOSE,PICK AND ORDER</p>
                <p style="text-align:center;">SHOP TO YOUR FULLEST</p>
                </div>
            </header>
            
        <div class="row text-center" style="display:flex; flex-wrap: wrap; size:50% ;">
        <% shops.forEach(function(shop){ %>
                <div class="col-md-4 col-sm-6">
                    <div class="thumbnail">
                      
                        <img src="<%= shop.image %>" >
                       <div class="caption" style="text-align: center;">
                        <div id="mycart">
                        <h4><%= shop.name %></h4>
                      </div>
                    </div>
                    <p>
                      <a href="/shop/<%= shop._id %>">More Info</a>
                    </p>
                    <button type="button" data-name="<%=shop.name %>" data-image="<%=shop.image %>" data-price="<%=shop.price %>"  class="btn btn-primary btn-large" onclick="cart(this)">ADD TO CART</button>

                    
                    </div>
                    
                
            </div>
            <% }) %>
        </div>
        </div>
            
            
    
            <script>
              async function cart(element){
                   let name=element.dataset.name;
                   let image = element.dataset.image;
                   let price=element.dataset.price;
                   let response = await fetch('http://localhost:3000/cart?name='+name+"&"+"image="+image+"&"+"price="+price, {
                   method: 'POST',
                 });
                 alert("Added to cart successfully !");
               }
           </script>
            
    </body>
</html>
